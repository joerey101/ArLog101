async function loadJobs() {
    try {
        const res = await fetch('api_jobs.php');
        const json = await res.json();
        const container = document.getElementById('jobs-container');
        
        if (!json.success) {
            console.error("Error de API:", json.error);
            return;
        }

        document.getElementById('job-count').textContent = `${json.data.length} puestos`;
        
        container.innerHTML = json.data.map(job => `
            <div class="bg-white p-8 rounded-3xl border border-slate-200 shadow-sm hover:shadow-xl transition-all duration-300 flex flex-col justify-between group">
                <div>
                    <div class="flex flex-wrap gap-2 mb-4">
                        <span class="bg-emerald-50 text-emerald-700 text-[10px] font-bold px-3 py-1.5 rounded-lg uppercase border border-emerald-100">${job.departamento}</span>
                        
                        ${job.etiquetas ? job.etiquetas.map(tag => `
                            <span class="bg-slate-100 text-slate-500 text-[10px] font-bold px-3 py-1.5 rounded-lg uppercase italic border border-slate-200">
                                ${tag}
                            </span>
                        `).join('') : ''}
                    </div>

                    <h3 class="text-2xl font-bold text-slate-900 mb-2 group-hover:text-emerald-600 transition-colors">${job.titulo}</h3>
                    
                    <p class="text-slate-400 text-xs mb-6 font-medium">
                        <i class="fas fa-map-marker-alt mr-1"></i> ${job.ubicacion || 'No especificada'} 
                        <span class="mx-2">|</span> 
                        <i class="fas fa-briefcase mr-1"></i> ${job.tipo_contrato || 'Fijo'}
                    </p>
                    
                    <p class="text-slate-500 text-sm leading-relaxed mb-8 line-clamp-3">${job.descripcion || 'Sin descripci√≥n detallada.'}</p>
                </div>
                
                <button onclick="window.location.href='ver_anuncio.php?id=${job.id}'" class="w-full py-4 bg-slate-50 text-slate-800 rounded-2xl font-bold text-sm border border-slate-200 hover:bg-slate-900 hover:text-white hover:border-slate-900 transition-all transform active:scale-95">
                    Ver Detalle y Aplicar
                </button>
            </div>
        `).join('');
    } catch (e) {
        console.error("Error cargando anuncios:", e);
    }
}